---
title: git应用之git常用操作
date: 2016-05-13 13:59:09
tags: [git,常用命令操作]
---
*	这篇主要介绍的是如何配置git和相关操作命令，方便交流学习和以后查阅。

## 1.	配置用户

*	git安装完成之后，我们需要配置个人信息，配置方式如下。

*	git config [option] 
	*	--global 全局配置，当前用户下的所有仓库都共享同一个用户的配置信息
	*	--system 系统配置，该电脑下的所有仓库都共享一个用户的配置信息
	*	--local	 本地配置，该仓库下使用当前配置的用户信息。
*	配置用户名：git config --global user.name  "wangpansheng"
*	配置邮箱：	git config --global user.email  "wps@qq.com"
* 	获取信息：	git config --get user.name || --get user.email
*	配置信息存放在用户文件夹中的.gitconfig中存放着。
*	可以通过重复配置信息，覆盖之前配置的信息

## 2.	仓库初始化

*	使用git管理代码之前需要首先在工作目录下，输入该命令，初始化一个仓库。

*	git init

##	3.	查看文件状态

*	查看当前工作目录文件的状态，
*	如果下边文件名是红色的就是没有被追踪的，或者是暂存之后又被修改的文件。
*	如果绿色的就是已经add暂存了的文件。
*	会忽略空文件夹

*	medified 表示是跟踪到修改的文件

*	git status

##	4.	添加到暂存区

*	如果要把本地工作目录的文件添加到暂存区，也就是想要让git追踪文件的变化，就需要使用git add命令。然后使用git status查看文件状态是否被追踪。

*	git add [option]

*	*| -A	暂存所有文件
*	文件名，暂存指定文件

## 5.	撤销更改

*	有时候，我们可能会想要把代码恢复到以前的版本，这是就需要用到checkout了。
*	在撤销更该的时候，如果暂存区有备份，就恢复暂存区文件到工作目录，
*	如果暂存区没有就去版本库去恢复。

*	git checkout filename

## 6.	提交

*	git commit [option] -m "当前版本备注信息"

* 	提交单个文件时，option输入文件名即可，

*	在做版本回退时，需要根据版本备注信息选择回退的版本。

*	没提交一次都会有一个版本号，一般称为SHA值，

## 7.	查看提交日志

*	有时候我们需要查看提交的历史纪录，可以通过git log查看提交的历史记录

*	git log			不包含回退之后的版本
*	git log --oneline	简略显示日志
*	git reflog	查看所有历史版本，

##	8.	恢复之前提交的状态

*	回退到指定的版本

*	git reset [option] 版本id

*	将指定版本内的文件替换掉工作目录内的文件，实现版本回退，
*	如果传了 --hard 会同时更改暂存区文件

*	git reset HEAD^ 回退到前一次提交的版本，
*	git reset HEAD^^|| HEAD~2回退到前两次的版本

*	reset命令有3中方式：
	*	git reset  --mixed	
		-	默认方式，不带任何参数的git reset，
		-	版本区和暂存区变化，工作区不变化
	*	git reset --soft	
		-	回退到某个版本，只回退了commit的信息，不会恢复暂存区，
		-	如果还要提交，直接commit即可
	*	git reset --hard
		-	彻底回退到某个版本，本地的源码也会变为上一个版本的内容。

##	9.	git分支

-	在初始化一个本地仓库时，默认是没有主分支的，必须至少提交一次版本之后，git才会创建master主分支。

-	git在创建分支时，必须保证有master主分支。

1.	创建分支

	*	git branch name	创建分支

	*	git checkout -b branchName  创建分支并切换到该分支

2.	查看分支

	*	git branch

	-	有星号*标记的分支，就是当前工作目录所在的分支，

3.	切换分支

	-	git checkout branchName

	-	切换到指定分支

4.	分支的合并

	-	git merge branchName

	-	将指定分支合并到当前分支

5.	删除分支

	-	git branch -d branchName

	-	删除指定的分支

####	git分支策略

-	在实际开发中，虽然git分支很强大，但是也不是随便用的，通常我们需要按照一定的策略使用分支，提高开发效率。

1.	保证主分支的的稳定性，也就是说要保证主分支的代码，无bug，功能完整，不能在主分支上直接进行开发。

2.	如果需要开发新功能时，那么就创建一个该功能的分支，然后在该分支上进行代码编写。当功能开发完毕，并且测试无bug，将该分支上的代码合并到主分支上。

	-	该分支命名一般规范：所有的开发分支都以"dev-"+相关功能描述的单词。
	-	eg： 要开发登录功能时， 此时可以考虑创建一个开发分支，名字为dev-login

3.	如果开发时遇到协同开发，就要创建协同开发分支，在该分支上去编写代码。
	-	当代码合并时，可能会出现，代码冲突，一旦出现冲突，git无法解决，需要我们认为手动去处理。
	-	该分支一般的命名规范为：
		-	所有的开发分支都以"feature-"+相关描述词；
		-	eg：开发主页功能时，可以考虑创建一个分支，名字为feature-index

4.	如果在开发时，接到一个临时修改的bug的任务时，此时不要在主分支或当前未完成的分支上去修改，此时，创建一个bug分支，在该分支上去修改出现bug的代码，修改完成之后，将其合并到主分支，
	-	该分支命名规范：
	-	所有的开发分支都以"bug"+相关描述词；
	-	eg: 要修改登录超时问题，此时可以考虑创建一个bug分支，名字为bug-loginTimeout

-	如果出现冲突，必须手动解决冲突，然后重新提交版本，